{"version":3,"sources":["collapse/collapse.jsx"],"names":["Collapse","state","isExpanded","updateContentHeight","cn","expanded","props","undefined","content","contentCase","children","handleExpandedChange","expandedLabel","collapsedLabel","newExpandedValue","setState","onExpandedChange","contentHeight","offsetHeight","style","height","Component","propTypes","bool","string","oneOfType","arrayOf","node","theme","oneOf","className","func","defaultProps"],"mappings":";;;;;;;;kEAAA;;;;AAIA;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;IAKMA,Q,WAFL,kBAAG,UAAH,C,UACA,4B;;;;;;;;;;;;;;8LAwBGC,K,GAAQ;AACJC,wBAAY;AADR,S;;;;;4CAOY;AAChB,iBAAKC,mBAAL;AACH;;;6CAEoB;AACjB,iBAAKA,mBAAL;AACH;;;+BAEMC,E,EAAI;AAAA;;AACP,gBAAIC,WAAW,KAAKC,KAAL,CAAWJ,UAAX,KAA0BK,SAA1B,GACT,KAAKD,KAAL,CAAWJ,UADF,GAET,KAAKD,KAAL,CAAWC,UAFjB;;AAIA,mBACI;AAAA;AAAA;AACI,+BAAYE,GAAG;AACXC;AADW,qBAAH;AADhB;AAKI;AAAA;AAAA;AACI,6BAAM,aAACG,OAAD,EAAa;AAAE,mCAAKA,OAAL,GAAeA,OAAf;AAAyB,yBADlD;AAEI,mCAAYJ,GAAG,SAAH;AAFhB;AAII;AAAA;AAAA,0BAAK,KAAM,aAACK,WAAD,EAAiB;AAAE,uCAAKA,WAAL,GAAmBA,WAAnB;AAAiC,6BAA/D;AACM,6BAAKH,KAAL,CAAWI;AADjB,qBAJJ;AAOI,4EAAc,UAAW,KAAKP,mBAA9B;AAPJ,iBALJ;AAcI;AACI,+BAAYC,GAAG,MAAH,CADhB;AAEI,4BAAS,IAFb;AAGI,6BAAU,KAAKO,oBAHnB;AAII,0BACIN,WACM,KAAKC,KAAL,CAAWM,aADjB,GAEM,KAAKN,KAAL,CAAWO;AAPzB;AAdJ,aADJ;AA2BH;;;+CAGsB;AACnB,gBAAIC,mBAAmB,KAAKR,KAAL,CAAWJ,UAAX,KAA0BK,SAA1B,GACjB,CAAC,KAAKD,KAAL,CAAWJ,UADK,GAEjB,CAAC,KAAKD,KAAL,CAAWC,UAFlB;;AAIA,iBAAKa,QAAL,CAAc;AACVb,4BAAYY;AADF,aAAd;;AAIA,gBAAI,KAAKR,KAAL,CAAWU,gBAAf,EAAiC;AAC7B,qBAAKV,KAAL,CAAWU,gBAAX,CAA4BF,gBAA5B;AACH;AACJ;;;8CAGqB;AAClB,gBAAIT,WAAW,KAAKC,KAAL,CAAWJ,UAAX,KAA0BK,SAA1B,GACT,KAAKD,KAAL,CAAWJ,UADF,GAET,KAAKD,KAAL,CAAWC,UAFjB;;AAIA,gBAAIe,sBAAJ;;AAEA,gBAAIZ,QAAJ,EAAc;AACVY,gCAAgB,KAAKR,WAAL,CAAiBS,YAAjC;AACH,aAFD,MAEO;AACHD,gCAAgB,CAAhB;AACH;;AAED,gBAAI,KAAKT,OAAT,EAAkB;AACd,qBAAKA,OAAL,CAAaW,KAAb,CAAmBC,MAAnB,GAA+BH,aAA/B;AACH;AACJ;;;;EAxGkB,gBAAMI,S,WAClBC,S,GAAY;AACf;AACApB,gBAAY,oBAAKqB,IAFF;AAGf;AACAV,oBAAgB,oBAAKW,MAJN;AAKf;AACAZ,mBAAe,oBAAKY,MANL;AAOf;AACAd,cAAU,oBAAKe,SAAL,CAAe,CAAC,oBAAKC,OAAL,CAAa,oBAAKC,IAAlB,CAAD,EAA0B,oBAAKA,IAA/B,CAAf,CARK;AASf;AACAC,WAAO,oBAAKC,KAAL,CAAW,CAAC,eAAD,EAAkB,eAAlB,CAAX,CAVQ;AAWf;AACAC,eAAW,oBAAKL,SAAL,CAAe,CAAC,oBAAKM,IAAN,EAAY,oBAAKP,MAAjB,CAAf,CAZI;AAaf;AACAR,sBAAkB,oBAAKe;AAdR,C,UAiBZC,Y,GAAe;AAClBpB,mBAAe,UADG;AAElBC,oBAAgB;AAFE,C;kBAyFXb,Q","file":"collapse.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport Link from '../link/link';\nimport ResizeSensor from '../resize-sensor/resize-sensor';\n\nimport cn from '../cn';\nimport performance from '../performance';\n\n/**\n * Компонент «подката» позволяет спрятать кусок текста за ссылку «Еще...».\n */\n@cn('collapse')\n@performance()\nclass Collapse extends React.Component {\n    static propTypes = {\n        /** Управление состоянием `expand`/`collapse` компонента */\n        isExpanded: Type.bool,\n        /** Текст ссылки в `expand` состоянии */\n        collapsedLabel: Type.string,\n        /** Текст ссылки в `collapse` состоянии */\n        expandedLabel: Type.string,\n        /** Дочерние элементы `Collapse` */\n        children: Type.oneOfType([Type.arrayOf(Type.node), Type.node]),\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.oneOfType([Type.func, Type.string]),\n        /** Обработчик смены состояния `expand`/`collapse` */\n        onExpandedChange: Type.func\n    };\n\n    static defaultProps = {\n        expandedLabel: 'Collapse',\n        collapsedLabel: 'Expand'\n    };\n\n    state = {\n        isExpanded: false\n    };\n\n    content;\n    contentCase;\n\n    componentDidMount() {\n        this.updateContentHeight();\n    }\n\n    componentDidUpdate() {\n        this.updateContentHeight();\n    }\n\n    render(cn) {\n        let expanded = this.props.isExpanded !== undefined\n            ? this.props.isExpanded\n            : this.state.isExpanded;\n\n        return (\n            <div\n                className={ cn({\n                    expanded\n                }) }\n            >\n                <div\n                    ref={ (content) => { this.content = content; } }\n                    className={ cn('content') }\n                >\n                    <div ref={ (contentCase) => { this.contentCase = contentCase; } }>\n                        { this.props.children }\n                    </div>\n                    <ResizeSensor onResize={ this.updateContentHeight } />\n                </div>\n                <Link\n                    className={ cn('link') }\n                    pseudo={ true }\n                    onClick={ this.handleExpandedChange }\n                    text={\n                        expanded\n                            ? this.props.expandedLabel\n                            : this.props.collapsedLabel\n                    }\n                />\n            </div>\n        );\n    }\n\n    @autobind\n    handleExpandedChange() {\n        let newExpandedValue = this.props.isExpanded !== undefined\n            ? !this.props.isExpanded\n            : !this.state.isExpanded;\n\n        this.setState({\n            isExpanded: newExpandedValue\n        });\n\n        if (this.props.onExpandedChange) {\n            this.props.onExpandedChange(newExpandedValue);\n        }\n    }\n\n    @autobind\n    updateContentHeight() {\n        let expanded = this.props.isExpanded !== undefined\n            ? this.props.isExpanded\n            : this.state.isExpanded;\n\n        let contentHeight;\n\n        if (expanded) {\n            contentHeight = this.contentCase.offsetHeight;\n        } else {\n            contentHeight = 0;\n        }\n\n        if (this.content) {\n            this.content.style.height = `${contentHeight}px`;\n        }\n    }\n}\n\nexport default Collapse;\n"]}